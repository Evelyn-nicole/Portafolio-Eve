<app-navbar></app-navbar>

<!-- Botón flotante de Contacto -->
<button class="btn-contact" (click)="abrirContacto()">Contacto</button>

<!-- Overlay semi-transparente -->
<div class="contact-overlay" *ngIf="contactoAbierto" (click)="cerrarContacto(contactForm)"></div>

<!-- Panel de contacto deslizante -->
<div class="contact-panel" [class.abierto]="contactoAbierto">
  <div class="panel-header">
    <h2>Contáctame</h2>
    <span class="cerrar" (click)="cerrarContacto(contactForm)">&times;</span>
  </div>

  <!-- Formulario con validaciones -->
  <form (ngSubmit)="enviarContacto(contactForm)" #contactForm="ngForm">
    <!-- Nombre -->
    <input type="text" name="nombre" placeholder="Nombre" required [(ngModel)]="contact.nombre" #nombre="ngModel"
      pattern="^[a-zA-ZÀ-ÿ\s]+$" />
    <div class="error" *ngIf="nombre.invalid && nombre.touched">
      El nombre es obligatorio y solo debe contener letras.
    </div>

    <!-- Correo -->
    <input type="email" name="email" placeholder="Correo electrónico" required [(ngModel)]="contact.email"
      #email="ngModel" pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />
    <div class="error" *ngIf="email.invalid && email.touched">
      Ingresa un correo válido (ej: ejemplo&#64;correo.com).

    </div>

    <!-- Mensaje -->
    <textarea name="mensaje" placeholder="Tu mensaje" rows="5" required [(ngModel)]="contact.mensaje"
      #mensaje="ngModel"></textarea>
    <div class="error" *ngIf="mensaje.invalid && mensaje.touched">
      El mensaje no puede estar vacío.
    </div>

    <!-- Botón enviar deshabilitado si hay errores -->
    <button type="submit" [disabled]="contactForm.invalid">Enviar</button>
  </form>
</div>

<router-outlet></router-outlet>

<!-- Toast de éxito -->
<div class="toast" *ngIf="toastVisible">
  <span>¡Mensaje enviado correctamente!</span>
  <span class="cerrar-toast" (click)="cerrarToast()">&times;</span>
</div>

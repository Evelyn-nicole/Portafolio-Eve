<app-navbar></app-navbar>

<!-- Botón flotante de Contacto -->
<button class="btn-contact" (click)="abrirContacto()">Contacto</button>

<!-- Overlay semi-transparente -->
<div class="contact-overlay" *ngIf="contactoAbierto" (click)="cerrarContacto()"></div>

<!-- Panel de contacto deslizante -->
<div class="contact-panel" [class.abierto]="contactoAbierto">
  <div class="panel-header">
    <h2>Contáctame</h2>
    <span class="cerrar" (click)="cerrarContacto()">&times;</span>
  </div>

  <!-- Formulario con validaciones -->
  <form #contactFormEl (ngSubmit)="enviarContacto()" #contactForm="ngForm">
    <!-- Nombre -->
    <input type="text" name="from_name" placeholder="Nombre" required [(ngModel)]="contact.nombre" #nombre="ngModel"
      pattern="^[a-zA-ZÀ-ÿ\s]+$" />
    <div class="error" *ngIf="nombre.invalid && nombre.touched">
      El nombre es obligatorio y solo debe contener letras.
    </div>

    <!-- Correo -->
    <input type="email" name="from_email" placeholder="Correo electrónico" required [(ngModel)]="contact.email" #email="ngModel" pattern="..."
      pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(com|cl|net|org)$" />
    <div class="error" *ngIf="email.invalid && email.touched">
      Ingresa un correo válido (ej: ejemplo&#64;correo.com).
    </div>

    <!-- Mensaje -->
    <textarea name="message" placeholder="Tu mensaje" rows="5" required [(ngModel)]="contact.mensaje" #mensaje="ngModel"></textarea>
    <div class="error" *ngIf="mensaje.invalid && mensaje.touched">
      El mensaje no puede estar vacío.
    </div>

    <!-- Botón enviar deshabilitado si hay errores -->
    <button type="submit" [disabled]="contactForm.invalid || isEnviando">Enviar</button>

  </form>
</div>

<router-outlet></router-outlet>


<!-- Toast de éxito centrado y animado -->
<div class="toast" *ngIf="toastVisible">
  <div class="toast-text">
    <p>¡Mensaje enviado correctamente!</p>
    <p>Revisa tu correo, pronto recibirás nuestra respuesta.</p>
  </div>
  <span class="cerrar-toast" (click)="cerrarToast()">&times;</span>
</div>

